{% load static %}
<!DOCTYPE HTML>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CAMBIO</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

<!--Template tags-->
{% load cambio_extras %}


<body>
  <div class="header">
    <h1>CAMBIO</h1>
  </div>

  <form action="/cambio/{{name}}" method="GET">
    <div class="row">
      <div class="column1">
        <b>Climate Scenarios</b><br>

        <!--<div id="years" class="climate_variables">-->
        {% for i, scenario_input in old_scenario_inputs %}
        <details>
          <summary>Scenario {{i}}</summary>
          <ul>
            {% for name, value in scenario_input.items %}
            <li> {{name}} = {{value}} </li>
            {% endfor %}
          </ul>
        </details>
        {% endfor %}

        <br>
        <b>Add new climate scenario:</b><br>
        <label for="start_year">start year</label>
        <input type="text" placeholder="1750" id="start_year" name="start_year"><br>
        <label for="stop_year">ending year</label>
        <input type="text" placeholder="2200" id="stop_year" name="stop_year"><br>
        <label for="dtime">Time resolution</label>
        <input type="text" placeholder="1.0" id="dtime" name="dtime"><br> <!--time resolution (years) -->
        <label for="inv_time_constant">Inverse time constant</label>
        <input type="text" placeholder="0.025" id="inv_time_constant" name="inv_time_constant"><br>
        <label for="transition_year">Year of peak emissions</label>
        <input type="text" placeholder="2040" id="transition_year" name="transition_year"><br>
        <!-- # year to start decreasing CO2 -->
        <label for="transition_duration">Time to transition</label>
        <input type="text" placeholder="20" id="transition_duration" name="transition_duration"><br>
        <!--years over which to decrease co2  -->
        <label for="long_term_emissions">Long term emissions</label>
        <input type="text" placeholder="2" id="long_term_emissions" name="long_term_emissions"><br>
        <!--# ongoing carbon emissions after decarbonization  -->
        <b>Feedbacks</b><br>
        <label for="albedo_with_no_constraint">Contraint on albedo</label>
        <input type="text" placeholder="False" id="albedo_with_no_constraint" name="albedo_with_no_constraint"><br>
        <!-- -->
        <label for="albedo_feedback">Albedo feedback</label>
        <input type="text" placeholder="False" id="albedo_feedback" name="albedo_feedback"><br> <!-- -->
        <label for="temp_anomaly_feedback">Temperature feedback</label>
        <input type="text" placeholder="False" id="temp_anomaly_feedback" name="temp_anomaly_feedback"><br> <!-- -->
        <b>Noise</b><br>
        <label for="stochastic_C_atm">Turn on noise</label>
        <input type="text" placeholder="False" id="stochastic_C_atm" name="stochastic_C_atm"><br> <!-- -->
        <label for="stochastic_c_atm_std_dev">Noise level</label>
        <input type="text" placeholder="0.1 " id="stochastic_c_atm_std_dev" name="stochastic_c_atm_std_dev">
        <br><!-- -->
        <button type="submit" value="Submit" formaction="/cambio/{{name}}">Submit</button>

        <br><br><br><br><br><br><br><br><br><br><br>
      </div>

      <div class="graph_area" id="graph_area">
        <!-- Time series plots -->
        {% autoescape off %}
        {% for inps, plot_div, unit_names in plot_divs %}

        {% for inp in inps %}
        {% if inp in request.GET %}
        <input class="vars-to-plot-buttons " type="checkbox" id="{{inp}}" name="{{inp}}" value="on" checked>
        {% else %}
        <input type="checkbox" id="{{inp}}" name="{{inp}}" value="on">
        {% endif %}
        <label for="{{inp}}">{{inp}}</label>
        {% endfor %}
        <br>
        {% for name, unit in unit_names %}
        {% if name in request.GET and request.GET|get_item:name == unit %}
        <input type="radio" id="climvarbutton-{{name}}-{{unit}}" name="{{name}}" value="{{unit}}" checked>
        {% else %}
        <input type="radio" id="climvarbutton-{{name}}-{{unit}}" name="{{name}}" value="{{unit}}">
        {% endif %}
        <label for="climvarbutton-{{name}}-{{unit}}">{{unit}}</label>
        {% endfor %}

        {{ plot_div }}
        ____________________________________________________________________________________________________________
        <br><br>
        {% endfor %}
        {% endautoescape %}
      </div>

    </div>
  </form>


  <br> <br>
  &nbsp; The CAMBIO Climate model was made by Professor Steven Neshyba at the University of Puget Sound.
  <br>
  &nbsp; This WebApp was created by Penny Rowe and Daniel Neshyba-Rowe, Dec. 2022
  <br><br>
</body>

</html>